<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Pikifen manual</title>
  <meta name="description" content="The Pikifen user manual">

  <link rel="stylesheet" href="../data/style.css">
  <script src="../data/script.js"></script>
  <link rel="icon" href="../../game_data/base/graphics/gui/icon.png" />
</head>

<body onload="setup('GUI', ['Making content'], ['making.html']);">
  <div id="page-content">

    <p>All menus and HUDs (heads-up displays) in <i>Pikifen</i> can be customized. Most of them only allow you to change the position and size of the different items, but some may allow for more in-depth customizations. Each menu or HUD has a GUI (graphical user interface), and each GUI definition is a piece of <a href="making.html#content">content</a>, so you should know how content works in the engine in general before starting. Each one has its own <a href="making.html#data-file">data file</a>, located in <code>game_data/&lt;<a href="making.html#packs">pack</a>&gt;/gui</code>. Some menus are consisted of multiple different parts, each with its own GUI definition.</p>

    <p>All GUI definitions contain hardcoded items, and can contain custom items. Hardcoded GUI items are those that the engine needs for the menu to work properly; it expects these items to exist in order to change them, get feedback from them, control their appearance and behavior, etc. Custom GUI items on the other hand are completely optional and only serve to decorate the GUI. You can have as many as you want, as well as what they show inside, from images to text to shapes.</p>

    <p>To change the position and size of hardcoded GUI items, or to control custom GUI items, you can just use the GUI editor accessible from the main menu. To change other things related to a GUI, you will need to edit the data files by hand.</p>

    <p>This page explains how the editor works, as well as list all the different menus and HUDs that can be further customized.</p>

    <h2 id="editor">GUI editor</h2>

    <p>The GUI editor is a simple tool that allows you to change the position and size of each item in a menu/HUD. To learn more about how editors work in general, see <a href="editor.html">here</a>.</p>

    <p>Because each GUI looks and behaves in its own way, the editor can't tell you much about what each one is, so you'll have to navigate through each GUI definition using its internal name. These names are fairly intuitive, and if you're ever unsure about what a given GUI definition is for, open it up in the editor, head to the information panel, and check its description. It may even contain some important notes about that GUI's unique behaviors.</p>

    <h3 id="coordinates">Canvas and coordinates</h3>

    <dl>
      <dt><b>The left side of the editor represents the player's game window.</b></dt>
      <dd>Once you open a GUI definition, you'll see a green square in a black void in the canvas, on the left half of the editor. This square represents the player's game window, and is where all the items are positioned.</dd>

      <dt><b>GUI item positions and sizes aren't specified in pixels.</b></dt>
      <dd>You may find it weird how the green shape in the canvas is a square, since almost nobody uses a square game window. The trick with this editor, and with the way GUI item positions and sizes work, is that you don't specify exact coordinates for where they should go, or how big they should be. If you want to horizontally center a certain item in the game's window, you can't just say its center's X coordinate is 512 pixels or something. While 512 pixels may look centered in your game's window, it may look completely off in the window of somebody with a different size &ndash; remember each player can set the game's window size in the options menu!</dd>

      <dt><b>Positions and sizes are measured in window percentages.</b></dt>
      <dd>Instead of pixels, you have to specify percentages of the window's dimensions. To center something horizontally, you specify its center's X coordinate as 50%. To make it flush to the top of the window, its Y coordinate should be 0%. To make it take up a third of the window horizontally, its width should be 33%. And so on. So, in reality, the green square you see in the canvas is just a representation of percentages, and while it's a square here, the real game window will likely be stretched differently depending on each player's resolution. Still, the idea is for items to be placed in the portion of the game window they work best at, for items to look good together, for items to look nice when spaced evenly apart, etc., so exact pixels don't really matter.</dd>

      <dt><b>The mouse cursor's position can be seen in the status bar.</b></dt>
      <dd>As you move the mouse cursor about, you can see where it is positioned in the green square by checking the right side of the status bar, located at the bottom of the editor.</dd>
    </dl>

    <h3 id="panel">Panel</h3>

    <dl>
      <dt><b>The panel on the right lists the items that exist.</b></dt>
      <dd>When you're in the hardcoded items mode or the custom items mode, the right side of the editor has a panel that includes a list of said items, as well as their internal names.</dd>

      <dt><b>In the list, checkboxes specify whether an item is visible.</b></dt>
      <dd>You can click on an item's checkbox in the list to make it visible or invisible. If it is invisible, it won't show up in the canvas nor in-game, though it'll still exist in the GUI definition.</dd>

      <dt><b>Click an item in the list to select it.</b></dt>
      <dd>When you click an item (not its checkbox), you will see some information about that item appear below the list in the panel. You will also see some handles on the canvas, surrounding that item. Those handles are explained later.</dd>

      <dt><b>Place your mouse over a hardcoded item in the list to learn what it is.</b></dt>
      <dd>Hardcoded items come with a handy description, so if you're ever unsure what an item is from its internal name alone, just use the tooltip provided.</dd>

      <dt><b>Edit the selected item's position or size in the widgets below the list.</b></dt>
      <dd>The numbers in the "center" and "size" widgets represent window percentages, as explained above. If instead you would like to specify where an item's top-left corner is, or bottom-right corner, there are some widgets to adjust things that way.</dd>

      <dt><b>For custom items, change their settings in the widgets farther below.</b></dt>
      <dd>Below the standard widgets for the position and size you'll find properties that control what a custom item shows. Certain properties will only be available for certain custom GUI item types.</dd>
    </dl>

    <h3 id="canvas">Interacting with the canvas</h3>

    <dl>
      <dt><b>Click an item's bubble in the canvas to select it.</b></dt>
      <dd>Instead of selecting an item through the panel's list, you can click on it in the canvas to select it. Doing so will also correctly select the corresponding item in the list.</dd>

      <dt><b>Red items are hardcoded, green items are custom.</b></dt>
      <dd>You can only select hardcoded items in the hardcoded item mode of the editor, and the same applies to custom items and the custom item mode.</dd>

      <dt><b>When items overlap, keep clicking to select different ones.</b></dt>
      <dd>If you click somewhere where two items overlap, the editor will select one of them. But if you click there again, it will select the other one. You can keep clicking to change which item is selected, making it a good way to find the exact item you need when you've got a lot of them in a tight space.</dd>

      <dt><b>Drag the central handle of the selected item to move it.</b></dt>
      <dd>Once an item is selected, handles appear allowing you to shape it in the canvas. This makes things much easier than tweaking numbers manually in the panel. The central handle moves the item around.</dd>

      <dt><b>Drag the other handles to resize it.</b></dt>
      <dd>The handles at the edges and corners of the selected item allow you to resize it, be it horizontally, vertically, or both. You can hold Alt to lock the center, instead of locking the opposite edge or corner.</dd>

      <dt><b>Hold Shift to disable snapping.</b></dt>
      <dd>When you move the handles, they snap to the nearest grid point. This helps you keep things aligned. If you don't want that, you can hold down the Shift key to disable snapping. You can also disable snapping by using the button in the toolbar that controls the snapping mode.</dd>

      <dt><b>Hold Ctrl to snap to horizontal or vertical axis.</b></dt>
      <dd>By holding Ctrl, you can move something just up or down, or just left or right.</dd>
    </dl>

    <h3 id="finishing">Putting it all together</h3>

    <dl>
      <dt><b>When you're done, save with the button in the toolbar.</b></dt>
      <dd>When you press the save button, the GUI definition gets saved to a file to your disk, and if you want, you can now quit the editor (with the button in the toolbar), go to where the relevant menu or HUD is, and check it out in action. Are things not quite what you expected? Here are some things to keep in mind:</dd>

      <dt><b>The editor only uses a hardcoded item's internal name and draw a vague shape representing it.</b></dt>
      <dd>Because each GUI's hardcoded items can behave in their own way, and look however they pleases, it is impossible for the GUI editor to show them in the canvas. Something like an icon in a menu might be simple, but something like the Sun Meter is composed of many individual moving parts. So you're going to have to use your imagination when using the editor.</dd>

      <dt><b>An item's size only specifies its maximum size.</b></dt>
      <dd>If you give an item a large width, but a small height, you may be surprised to find that, in-game, it doesn't look stretched out, and in fact looks pretty tiny. There is no one rule that controls what each item looks like &ndash; every single item in a menu or HUD behaves however it wants. The size properties in the GUI definition simply dictate the <i>maximum</i> width or height that the item is allowed to have. Normally, a GUI item will never be larger than the width or height you specified, though it can be smaller.</dd>

      <dt><b>GUI items can animate, including moving around.</b></dt>
      <dd>When gameplay starts, the HUD moves into view from the edges of the game window. When you pause, the menu slides into view from off-scene. A GUI's definition does not include any information about this, since that's all controlled by the engine. So don't be surprised that a GUI item can be in a position different from the one you specified &ndash; it's just moving into place! Likewise, some counters animate by growing their text whenever their number changes. This can result in them being bigger than the specified size, even if it's only temporary. If you're absolutely worried that this might make it bump into another item, remember to give the item some extra breathing room in the editor.</dd>

      <dt><b>If you want an item gone, mark it as invisible instead of placing it out of bounds.</b></dt>
      <dd>While a GUI item can be partially visible from an edge of the game window if you want, they shouldn't be entirely off the window. Because GUI items can animate and move during transitions, an item that is placed out of bounds might come into view during these times, which can confuse the player. Plus, having these items off-window will still make the engine waste resources on processing them, even if they're practically useless in-game. Instead, untick its checkbox in the list of items, in the panel.</dd>
    </dl>

    <h2 id="more-customization">More customization</h2>

    <p>Besides hardcoded and custom GUI items, some GUIs can be further customized. To do so, open its data file, head to the relevant sections, and change what you need, using this section of the manual to guide you. The internal name specified in each of these lists is the <a href="making.html#content">internal name</a> of the GUI definition.</p>

    <h3 id="gameplay">Gameplay</h3>

    <p>Actual gameplay. This is not a menu, but every HUD element can be customized in just the same way.</p>

    <ul>
      <li><b>Internal name:</b> <code>gameplay</code></li>
      <li>
        <b>Bitmaps:</b> You can specify the internal name of the bitmaps some of the HUD items should use in the <code>bitmaps</code> block.
        <ul>
          <li><code>bubble</code>: Standard, circular bubbles. Used on the standby Pikmin icon, leader icons, etc.</li>
          <li><code>checkbox_check</code>: A checkbox with a checkmark in it. Used in menus.</li>
          <li><code>checkbox_no_check</code>: A checkbox without a checkmark in it. Used in menus.</li>
          <li><code>counter_bubble_field</code>: The bubble in which the Pikmin-on-field counter is contained.</li>
          <li><code>counter_bubble_group</code>: Same as above, but the in-group counter.</li>
          <li><code>counter_bubble_standby</code>: Same as above, but the counter of group members of the current standby type.</li>
          <li><code>counter_bubble_total</code>: Same as above, but the Pikmin total counter.</li>
          <li><code>day_bubble</code>: The bubble in which the day counter is contained.</li>
          <li><code>distant_pikmin_marker</code>: The graphic that gets overlaid on top of the standby Pikmin's icon, to indicate that the closest Pikmin is too far away to grab.</li>
          <li><code>hard_bubble</code>: A rough, hard bubble. Used on the Sun Meter, leader icons, etc.</li>
          <li><code>no_pikmin_bubble</code>: Bubble to show when there are no Pikmin in the group.</li>
          <li><code>sun</code>: Icon for the sun in the Sun Meter.</li>
        </ul>
      </li>
    </ul>

    <h3 id="help-menu">Help menu</h3>

    <p>The help menu, accessible from the main menu or the pause menu.</p>

    <ul>
      <li><b>Internal name:</b> <code>help_menu</code></li>
      <li><b>Tidbits:</b> Tidbits of information in the help menu are specified in the <code>tidbits</code> block. There are four blocks inside, each one named after the corresponding category, in all lowercase. Inside each of those blocks is the list of items, one item per line. Each line follows the format <code>Tidbit name;Tidbit information text;Tidbit image</code>. The information text can make use of <a href="misc_features.html#markup">markup</a>. The image has to be the <a href="making.html#content">internal name</a> of the bitmap in the <code>game_data/&lt;<a href="making.html#packs">pack</a>&gt;/graphics</code> folders.</li>
    </ul>

    <h3 id="main-menu-make">Main menu &ndash; make page</h3>

    <p>The main menu's "make" page.</p>

    <ul>
      <li><b>Internal name:</b> <code>main_menu_make</code></li>
      <li>
        <b>Icons to the left:</b> Use this to indicate whether the icon on each button should be on the left side (<code>true</code>) or the right side (<code>false</code>).
        <ul>
          <li><code>animation_editor</code>: Animation editor button.</li>
          <li><code>area_editor</code>: Area editor button.</li>
          <li><code>gui_editor</code>: GUI editor button.</li>
        </ul>
      </li>
    </ul>

    <h3 id="main-menu-play">Main menu &ndash; play page</h3>

    <p>The main menu's "play" page.</p>

    <ul>
      <li><b>Internal name:</b> <code>main_menu_play</code></li>
      <li>
        <b>Icons to the left:</b> Use this to indicate whether the icon on each button should be on the left side (<code>true</code>) or the right side (<code>false</code>).
        <ul>
          <li><code>simple_areas</code>: Simple areas button.</li>
          <li><code>missions</code>: Missions button.</li>
        </ul>
      </li>
    </ul>

    <h3 id="main-menu-top">Main menu &ndash; top page</h3>

    <p>The main menu's top-level page, entered when you start the game.</p>

    <ul>
      <li><b>Internal name:</b> <code>main_menu_top</code></li>
      <li>
        <b>Logo:</b> The logo that is made of Pikmin can be customized in the <code>logo</code> block.
        <ul>
          <li><code>min_window_limit</code>: Top-left coordinates of the logo's placement on the game window, in window width or height percentage.</li>
          <li><code>max_window_limit</code>: Same as above, but for the bottom-right.</li>
          <li><code>pikmin_max_speed</code>: Each Pikmin's speed is random. This is the maximum speed possible, in ratio per second. The ratio is of the window width or height, whichever is largest.</li>
          <li><code>pikmin_min_speed</code>: Same as above, but minimum possible.</li>
          <li><code>pikmin_speed_smoothness</code>: The closer to their destination, the more the Pikmin slow down, based on this multiplier. <code>0.08</code> is a good number.</li>
          <li><code>pikmin_sway_amount</code>: How many pixels a Pikmin sways left or right when standing still.</li>
          <li><code>pikmin_sway_max_speed</code>: Each Pikmin's swaying speed is random. This is the maximum speed, in radians per second (the Y part is ignored when swaying).</li>
          <li><code>pikmin_sway_min_speed</code>: Same as above, but the minimum speed.</li>
          <li><code>pikmin_size</code>: Pikmin size, in window dimension percentage. For instance, <code>3 2</code> means each Pikmin cannot be any larger than 3% of the window width nor 2% of the window height.</li>
          <li><code>pikmin_types</code>: This block specifies the types of Pikmin you'll encounter in the title logo. Except every type is simply defined by the image of its flower. In this block, every line is a type, in the format <code>character = image</code>, where <code>character</code> is a text character representing this Pikmin type in the logo map (see below), and <code>image</code> is the <a href="making.html#content">internal name</a> of the image in the <code>game_data/&lt;<a href="making.html#packs">pack</a>&gt;/graphics</code> folders.</li>
          <li><code>map</code>: A representation of the logo. The Pikmin are organized in a grid, and that grid is spread to fit in the limits specified above. Every line in this block represents a line in the grid, with every character matching a cell in that line. A character represents a Pikmin type or a blank space, if it's a character specified in the <code>pikmin_types</code> block or a dot (<code>.</code>), respectively.</li>
        </ul>
      </li>
      <li>
        <b>Icons to the left:</b> Use this to indicate whether the icon on each button should be on the left side (<code>true</code>) or the right side (<code>false</code>).
        <ul>
          <li><code>play</code>: Play button.</li>
          <li><code>make</code>: Make button.</li>
          <li><code>options</code>: Options button.</li>
          <li><code>statistics</code>: Statistics button.</li>
          <li><code>quit</code>: Quit button.</li>
        </ul>
      </li>
    </ul>

    <h3 id="options-menu-top">Options menu &ndash; top page</h3>

    <p>The top-level menu where players choose what type of options they want to tinker with.</p>

    <ul>
      <li><b>Internal name:</b> <code>options_menu_top</code></li>
      <li>
        <b>Icons to the left:</b> Use this to indicate whether the icon on each button should be on the left side (<code>true</code>) or the right side (<code>false</code>).
        <ul>
          <li><code>controls</code>: Controls page button.</li>
          <li><code>graphics</code>: Graphics page button.</li>
          <li><code>audio</code>: Audio page button.</li>
          <li><code>misc</code>: Misc. page button.</li>
        </ul>
      </li>
    </ul>

    <h3 id="pause-menu-radar">Pause menu &ndash; radar page</h3>

    <p>The radar page of the pause menu.</p>

    <ul>
      <li><b>Internal name:</b> <code>pause_menu_radar</code></li>
      <li>
        <b>Bitmaps:</b> You can specify the internal name of the bitmaps some of the radar icons should use in the <code>bitmaps</code> block.
        <ul>
          <li><code>pikmin</code>: Icon representing a Pikmin.</li>
          <li><code>treasure</code>: Icon representing a treasure.</li>
          <li><code>enemy_alive</code>: Icon representing a living enemy.</li>
          <li><code>enemy_dead</code>: Icon representing a dead enemy.</li>
          <li><code>leader_bubble</code>: Bubble to place around a leader's icon.</li>
          <li><code>leader_x</code>: X imposed on top of KO'd leader icons.</li>
          <li><code>obstacle</code>: Icon representing a generic obstacle that blocks paths.</li>
          <li><code>onion_skeleton</code>: Skeleton part of the icon that represents an Onion. This is the part of the icon that doesn't change color, i.e. the legs and other details.</li>
          <li><code>onion_bulb</code>: Bulb part of the icon that represents an Onion. This is the part that changes color depending on the Pikmin it can manage.</li>
          <li><code>ship</code>: Icon representing a ship.</li>
        </ul>
      </li>
    </ul>

  </div>
</body>
</html>
